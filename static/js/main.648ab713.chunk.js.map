{"version":3,"sources":["../../src/components/Utils.ts","../../src/components/Row.tsx","../../src/components/Root.tsx","../../src/index.tsx","components/rapidTooltip.ts","components/Boston6DigitRCA.tsx","App.tsx","index.tsx"],"names":["Layout","Category","fadeIn","keyframes","highlightedIdName","Root","styled","LabelText","Cell","BarCell","Range","Bar","React","props","d","rowHeight","gridHeight","max","onRowHover","range","layout","highlighted","chartWidth","textWidth","style","height","backgroundColor","undefined","onMouseMove","e","datum","mouseCoords","x","y","clientY","onMouseLeave","id","width","className","transitionDelay","textAlign","Container","ChartContainer","ChartBlock","TitleRoot","AxisLines","Grid","AxisValue","AxisText","AxisLine","AxisTitle","data","formatValue","axisLabel","onHighlightError","numberOfXAxisTicks","useState","setMeasurements","rootRef","useRef","textRef","chartRef","useEffect","chartRect","textRect","updateWindowWidth","window","highlightedElm","rootNode","behavior","orderedData","orderBy","axisIncrement","totalAxisValues","axisFontSize","axisWidth","axisLines","i","value","formatted","key","rows","axisTitle","right","buffer","paddingRight","overflowPadding","paddingLeft","visibility","marginLeft","left","ref","gridTemplateRows","gridTemplateColumns","RapidTooltipRoot","div","filteredRCA","RCA_DATA","cityIndustryYearList","filter","rcaNumCompany","Math","ceil","map","logMax","v","p","pow2ceil","console","log","scale","scaleLog","domain","base","industry","NAICS_DATA","find","n","naics_id","toString","naicsId","title","name","color","parseFloat","invert","toFixed","BostonNewYork6Digit","tooltipRef","node","current","innerHTML","input","columnCount","length","forEach","r","row","c","alignment","boldColumns","includes","getStandardTooltip","rgba","top","display","setHovered","App","component","Boston6DigitRCA","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.648ab713.chunk.js","sourcesContent":["import {keyframes} from 'styled-components/macro';\n\nexport interface WithDyanmicFont {\n  $dynamicFont: string; // should be value of clamp\n}\n\nexport interface BarDatum {\n  id: string,\n  title: string,\n  value: number,\n  color: string,\n}\n\nexport enum Category {\n  Primary,\n  Secondary,\n}\n\nexport interface RowHoverEvent {\n  datum: BarDatum | undefined;\n  mouseCoords: {x: number, y: number};\n}\n\nexport enum Layout {\n  Left = 'left',\n  Right = 'right',\n}\n\nexport const fadeIn = keyframes`\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n`;\n","import React from 'react';\nimport styled from 'styled-components/macro';\nimport {\n  WithDyanmicFont,\n  BarDatum,\n  RowHoverEvent,\n  Layout,\n  fadeIn,\n} from './Utils';\n\nexport const highlightedIdName = 'react-comparison-bar-chart-highlighted-item';\n\nconst Root = styled.div`\n  display: flex;\n\n  &:hover {\n    background-color: #f1f1f1;\n  }\n`;\n\nconst LabelText = styled.div<WithDyanmicFont>`\n  width: 100%;\n  font-size: ${({$dynamicFont}) => $dynamicFont};\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  opacity: 0;\n  animation: ${fadeIn} 0.15s linear 1 forwards 0.3s;\n`;\n\nexport const Cell = styled.div`\n  transition: height 0.3s ease-in-out;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n`;\n\nconst BarCell = styled(Cell)`\n  display: flex;\n`;\n\nconst Range = styled.div`\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  border-left: solid 1px #333;\n`;\n\nconst Bar = styled.div`\n  height: 70%;\n  transition: width 0.2s ease-in-out;\n`;\n\ninterface Props {\n  d: BarDatum;\n  rowHeight: number;\n  gridHeight: number;\n  max: number;\n  onRowHover: undefined | ((event: RowHoverEvent) => void);\n  layout: Layout | undefined;\n  highlighted: string | undefined;\n  chartWidth: number;\n  textWidth: number;\n  range: number;\n}\n\nconst Row = (props: Props) => {\n  const {\n    d, rowHeight, gridHeight,\n    max, onRowHover, range,\n    layout, highlighted, chartWidth, textWidth,\n  } = props;\n\n  \n  const style: React.CSSProperties = {\n    height: rowHeight,\n    backgroundColor: highlighted === d.id ? '#f1f1f1' : undefined,\n  };\n  const onMouseMove = (e: React.MouseEvent) => {\n    if (onRowHover) {\n      onRowHover({\n        datum: d,\n        mouseCoords: {\n          x: e.clientX,\n          y: e.clientY,\n        },\n      })\n    }\n  }\n\n  const onMouseLeave = (e: React.MouseEvent) => {\n    if (onRowHover) {\n      onRowHover({\n        datum: undefined,\n        mouseCoords: {\n          x: e.clientX,\n          y: e.clientY,\n        },\n      })\n    }\n  }\n\n  if (layout === Layout.Right) {\n    return (\n      <Root>\n        <BarCell\n          id={highlighted === d.id ? highlightedIdName : undefined}\n          style={{...style, width: chartWidth}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        >\n          <Range style={{width: `${range}%`}}>\n            <Bar\n              className={'react-comparison-bar-chart-bar'}\n              style={{\n                backgroundColor: d.color,\n                width: `${d.value / max * 100}%`,\n                transitionDelay: '0.3s',\n              }}\n            />\n          </Range>\n        </BarCell>\n        <Cell\n          style={{...style, width: '2rem'}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        />\n        <Cell\n          style={{...style, width: textWidth}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        >\n          <LabelText\n            className={'react-comparison-bar-chart-row-label'}\n            style={{\n              textAlign: 'left',\n            }}\n            $dynamicFont={`clamp(0.5rem, ${gridHeight * 0.04}px, 0.9rem)`}\n          >\n            {d.title}\n          </LabelText>\n        </Cell>\n      </Root>\n    );\n  } else {\n    return (\n      <Root>\n        <Cell\n          style={{...style, width: textWidth}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        >\n          <LabelText\n            className={'react-comparison-bar-chart-row-label'}\n            style={{\n              textAlign: 'right',\n            }}\n            $dynamicFont={`clamp(0.5rem, ${gridHeight * 0.04}px, 0.9rem)`}\n          >\n            {d.title}\n          </LabelText>\n        </Cell>\n        <Cell\n          style={{...style, width: '2rem'}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        />\n        <BarCell\n          id={highlighted === d.id ? highlightedIdName : undefined}\n          style={{...style, width: chartWidth}}\n          onMouseMove={onMouseMove}\n          onMouseLeave={onMouseLeave}\n        >\n          <Range style={{width: `${range}%`}}>\n            <Bar\n              className={'react-comparison-bar-chart-bar'}\n              style={{\n                backgroundColor: d.color,\n                width: `${d.value / max * 100}%`,\n                transitionDelay: '0.3s',\n              }}\n            />\n          </Range>\n        </BarCell>\n      </Root>\n    );\n  }\n\n}\n\nexport default React.memo(Row);\n","import React, {useState, useRef, useEffect} from 'react';\nimport styled from 'styled-components/macro';\nimport orderBy from 'lodash/orderBy';\nimport Row, {Cell, highlightedIdName} from './Row';\nimport {\n  WithDyanmicFont,\n  BarDatum,\n  RowHoverEvent,\n  Layout,\n} from './Utils';\n\nconst overflowPadding = 1; // in rem. Needed to allow for final axis value to remain visible\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  padding-bottom: 2rem;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n`;\n\nconst ChartContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  /* makes this element the relative parent for position: fixed children */\n  will-change: transform;\n`;\n\nconst ChartBlock = styled.div`\n  grid-column: 1 / -1;\n  width: 100%;\n`;\n\nconst TitleRoot = styled.div<WithDyanmicFont>`\n  margin-left: auto;\n  display: flex;\n  position: absolute;\n  top: 1px;\n  font-size: ${({$dynamicFont}) => $dynamicFont};\n`;\n\nconst AxisLines = styled.div`\n  position: absolute;\n  width: 100%;\n  display: flex;\n`;\n\nconst Grid = styled.div`\n  width: 100%;\n  height: 100%;\n  grid-row: 1;\n  display: grid;\n  position: relative;\n  /* both auto and overlay required for browsers that don't support overlay */\n  overflow: auto;\n  overflow-y: overlay;\n  overflow-x: hidden\n\n  ::-webkit-scrollbar {\n    -webkit-appearance: none;\n    width: 7px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, .3);\n  }\n  ::-webkit-scrollbar-track {\n    background-color: rgba(0, 0, 0, .1);\n  }\n`;\n\nconst AxisValue = styled.div`\n  display: flex;\n  flex-shrink: 0;\n  background-color: #fff;\n  position: relative;\n  pointer-events: none;\n\n\n  &:after {\n    content: '';\n    width: 100%;\n    height: 0;\n    position: absolute;\n    bottom: 0;\n  }\n\n  &:not(:last-child) {\n    &:after {\n      border-bottom: solid 2px #333;\n      z-index: 10;\n    }\n  }\n\n  :last-child {\n    &:after {\n      border-bottom: solid 2px transparent;\n    }\n  }\n`;\n\nconst AxisText = styled.span<WithDyanmicFont>`\n  font-size: ${({$dynamicFont}) => $dynamicFont};\n  transform: translate(-50%, calc(100% + 4px));\n  position: absolute;\n  bottom: 0;\n`;\n\nconst AxisLine = styled.div`\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 0;\n  border-left: solid 1px #dfdfdf;\n`;\n\nconst AxisTitle = styled.div<WithDyanmicFont>`\n  position: absolute;\n  bottom: 0;\n  z-index: 1;\n  font-size: ${({$dynamicFont}) => $dynamicFont};\n  padding: 0 0 0.3rem 1rem;\n  box-sizing: border-box;\n  pointer-events: none;\n  transform: translate(-1rem, 0);\n`;\n\nexport interface Props {\n  data: BarDatum[];\n  formatValue?: (value: number) => string | number;\n  axisLabel?: React.ReactElement<any> | string | undefined | null;\n  onRowHover?: (event: RowHoverEvent) => void;\n  layout?: Layout;\n  highlighted?: string;\n  onHighlightError?: (value: string) => void;\n  numberOfXAxisTicks?: number;\n}\n\ninterface Measurements {\n  gridHeight: number,\n  chartWidth: number,\n  textWidth: number,\n}\n\nconst Root = (props: Props) => {\n  const {\n    data, formatValue,\n    axisLabel, onRowHover, layout, highlighted,\n    onHighlightError,\n    numberOfXAxisTicks,\n  } = props;\n\n  if (!data.length) {\n    return null;\n  }\n\n  const [{gridHeight, chartWidth, textWidth}, setMeasurements] = useState<Measurements>({\n    gridHeight: 0, chartWidth: 0, textWidth: 0\n  });\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const textRef = useRef<HTMLDivElement | null>(null);\n  const chartRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    if (rootRef && rootRef.current && chartRef && chartRef.current && textRef && textRef.current) {\n      const chartRect = chartRef.current.getBoundingClientRect();\n      const textRect = textRef.current.getBoundingClientRect();\n      setMeasurements({\n        gridHeight: rootRef.current.offsetHeight, chartWidth: chartRect.width, textWidth: textRect.width,\n      });\n    }\n  }, [rootRef, chartRef])\n\n  useEffect(() => {\n    const updateWindowWidth = () => {\n      if (rootRef && rootRef.current && chartRef && chartRef.current && textRef && textRef.current) {\n        const chartRect = chartRef.current.getBoundingClientRect();\n        const textRect = textRef.current.getBoundingClientRect();\n        setMeasurements({\n          gridHeight: rootRef.current.offsetHeight, chartWidth: chartRect.width, textWidth: textRect.width,\n        });\n      }\n    };\n    window.addEventListener('resize', updateWindowWidth);\n    return () => {\n      window.removeEventListener('resize', updateWindowWidth);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (rootRef && rootRef.current && highlighted !== undefined) {\n      const rootNode = rootRef.current;\n      const highlightedElm: HTMLElement | null = rootNode.querySelector(`#${highlightedIdName}`);\n      if (highlightedElm) {\n        highlightedElm.scrollIntoView({behavior: \"smooth\"});\n      } else if (onHighlightError) {\n        onHighlightError(highlighted);\n      }\n    }\n  }, [rootRef, highlighted]);\n\n  const orderedData = orderBy(data, ['value'], 'desc');\n\n  const maxValue = 100;\n\n  const totalTopValues = 20;\n  const rowHeight = gridHeight ? ((1 / totalTopValues) * gridHeight) : 0;\n\n  const axisIncrement = numberOfXAxisTicks ? maxValue / numberOfXAxisTicks : 25;\n\n  const totalAxisValues = maxValue / axisIncrement;\n\n  let axisFontSize: string;\n  if (chartWidth < gridHeight) {\n    axisFontSize = `clamp(0.55rem, ${chartWidth * 0.025}px, 1rem)`;\n  } else {\n    axisFontSize = `clamp(0.55rem, ${gridHeight * 0.025}px, 1rem)`;\n  }\n  const axisWidth = chartWidth / totalAxisValues;\n\n  const axisLines: React.ReactElement<any>[] = [];\n\n  for (let i = 0; i < totalAxisValues + 1; i++) {\n    const value = axisIncrement * i;\n    if (value <= maxValue) {\n      const formatted = formatValue ? formatValue(value) : value;\n      axisLines.push(\n        <AxisValue\n          key={'axis-line-right-' + i}\n          style={{width: axisWidth}}\n          className={'react-comparison-bar-chart-axis-value'}\n        >\n          <AxisText\n            $dynamicFont={axisFontSize}\n          >\n            {formatted}\n          </AxisText>\n          <AxisLine />\n        </AxisValue>\n      );\n    }\n  }\n\n  const rows = orderedData.map((d) => {\n    return (\n      <Row\n        key={d.id}\n        d={d}\n        rowHeight={rowHeight}\n        gridHeight={gridHeight}\n        max={maxValue}\n        onRowHover={onRowHover}\n        range={maxValue}\n        layout={layout}\n        highlighted={highlighted}\n        textWidth={textWidth}\n        chartWidth={chartWidth}\n      />\n    );\n  })\n\n  if (layout === Layout.Right) {\n    rows.reverse();\n  }\n\n  const axisTitle = axisLabel ? (\n    <AxisTitle\n      style={{\n        width: chartWidth,\n        right: layout !== Layout.Right ? 0 : undefined,\n        textAlign: layout !== Layout.Right ? 'right' : undefined,\n      }}\n      className={'react-comparison-bar-chart-axis-title'}\n      $dynamicFont={`clamp(0.75rem, ${chartWidth * 0.025}px, 1.1rem)`}\n    >\n      {axisLabel}\n    </AxisTitle>\n  ) : null;\n\n\n  const buffer: React.CSSProperties = layout !== Layout.Right\n    ? {paddingRight: overflowPadding + 'rem'} : {paddingLeft: overflowPadding + 'rem'};\n\n  return (\n    <Container\n      style={{...buffer}}\n      className={'react-comparison-bar-chart-root-container'}\n    >\n      <TitleRoot\n        style={{\n          width: chartWidth,\n          visibility: chartWidth ? undefined : 'hidden',\n          marginLeft: layout !== Layout.Right ? undefined : 0,\n          right: layout !== Layout.Right ? 0 : undefined,\n          left: layout !== Layout.Right ? undefined : 0,\n          ...buffer,\n        }}\n        $dynamicFont={`clamp(0.65rem, ${chartWidth * 0.023}px, 0.87rem)`}\n      >\n        <AxisLines style={{height: gridHeight}}>\n          {axisTitle}\n          {axisLines}\n        </AxisLines>\n      </TitleRoot>\n      <ChartContainer>\n        <Grid\n          ref={rootRef}\n          style={{\n            gridTemplateRows: 'repeat(${totalValues}, auto)',\n            gridTemplateColumns: layout !== Layout.Right\n              ? 'clamp(75px, 300px, 15%) 2rem 1fr'\n              : '1fr 2rem clamp(75px, 300px, 15%)',\n          }}\n          className={'react-comparison-bar-chart-grid'}\n        >\n          <Cell\n            ref={layout !== Layout.Right ? textRef : chartRef}\n          />\n          <Cell />\n          <Cell\n            ref={layout !== Layout.Right ? chartRef : textRef}\n          />\n          <ChartBlock>\n            {rows}\n          </ChartBlock>\n        </Grid>\n      </ChartContainer>\n    </Container>\n  );\n}\n\nexport default Root;\n","import React from 'react'\nimport Root, {\n  Props as VerticalBarChartProps,\n} from './components/Root';\nimport {\n  BarDatum,\n  RowHoverEvent,\n  Layout,\n} from './components/Utils';\n\nconst VerticalBarChart = (props: VerticalBarChartProps) => {\n  return (\n    <Root {...props} />\n  );\n}\n\nexport {\n  VerticalBarChartProps,\n  BarDatum,\n  RowHoverEvent,\n  Layout,\n}\n\nexport default VerticalBarChart;\n","import styled from 'styled-components/macro';\n\ninterface Input {\n  title: string;\n  color: string;\n  rows: string[][];\n  boldColumns?: number[];\n}\n\nexport const RapidTooltipRoot = styled.div`\n  position: fixed;\n  z-index: 3000;\n  max-width: 16rem;\n  padding-bottom: 0.5rem;\n  font-size: 0.7rem;\n  line-height: 1.4;\n  text-transform: none;\n  transition: opacity 0.15s ease;\n  color: #333;\n  background-color: #fff;\n  border: 1px solid #dfdfdf;\n  border-radius: 4px;\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.15);\n  pointer-events: none;\n  transform: translate(-50%, calc(-100% - 1.5rem));\n  display: none;\n`;\n\nexport const getStandardTooltip = (input: Input) => {\n  const columnCount = input.rows.length && input.rows[0].length ? input.rows[0].length : 1;\n\n  let rows: string = '';\n  input.rows.forEach(r => {\n    let row = '';\n    r.forEach((c, i) => {\n      const alignment = i === 0\n        ? 'justify-content: flex-start; text-align: left;'\n        : 'justify-content: flex-end; text-align: right;';\n      const style = input.boldColumns && input.boldColumns.includes(i)\n        ? `style=\"font-weight: 600;${alignment}\"` : '';\n      row = row + `<div class=\"rapid-tooltip-cell\" ${style}>${c}</div>`;\n    });\n    rows = rows + row;\n  });\n\n  return `\n    <div>\n      <div class=\"rapid-tooltip-title\" style=\"background-color: ${input.color};\">\n        ${input.title}\n      </div>\n      <div\n        class=\"rapid-tooltip-subsection-grid\"\n        style=\"display: grid; grid-template-columns: repeat(${columnCount}, auto);\"\n      >\n        ${rows}\n      </div>\n    </div>\n    <div class=\"rapid-tooltip-arrow-container\">\n      <div class=\"rapid-tooltip-arrow\"></div>\n    </div>\n  `;\n};","import React, {useRef} from 'react';\nimport ComparisonBarChart, {\n  BarDatum,\n  RowHoverEvent,\n} from 'react-vertical-bar-chart';\nimport styled from 'styled-components/macro';\nimport {rgba} from 'polished';\nimport {RapidTooltipRoot, getStandardTooltip} from './rapidTooltip';\nimport RCA_DATA from '../data/boston-6-digit-rca.json';\nimport NAICS_DATA from '../data/naics_2017.json';\nimport {scaleLog} from 'd3-scale';\n\n// 8 = 3\n// 16 = 4\n// 32 = 5\n// 64 = 3\n// 128 = 7\n// 256 = 4\n// 512 = 3\n// 1024 = 5\n\nfunction pow2ceil(v: number) {\n  let p = 2;\n  // eslint-disable-next-line\n  while (v >>= 1) {\n    p <<= 1;\n  }\n  return p;\n}\n// function nearestPowerOf2(n: number) {\n//    return 1 << 31 - Math.clz32(n);\n// }\nconst filteredRCA = RCA_DATA.data.cityIndustryYearList.filter(d => d.rcaNumCompany && d.rcaNumCompany >= 1);\nconst max = Math.ceil((Math.max(...filteredRCA.map(d => d.rcaNumCompany)) * 1.1) / 10) * 10;\nconst logMax = pow2ceil(250);\nconsole.log(logMax, max)\nconst scale = scaleLog()\n  .domain([1, logMax])\n  .range([ 0, 100 ])\n  .base(2)\n\nconst numberOfXAxisTicks = 4;\n\nconst data: BarDatum[] = filteredRCA.map(d => {\n  const industry = NAICS_DATA.find(n => n.naics_id.toString() === d.naicsId);\n  return {\n    id: d.naicsId,\n    title: industry ? industry.name : '',\n    value: scale(d.rcaNumCompany) as number,\n    color: 'gray',\n  }\n});\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n  box-sizing: border-box;\n  padding: 3rem;\n\n  @media (max-width: 720px) {\n    padding: 0.75rem;\n  }\n`;\n\nconst formatValue = (value: number) => {\n  const scaledValue = parseFloat(scale.invert(value).toFixed(2));\n  return scaledValue;\n  // return nearestPowerOf2(scaledValue);\n}\n\nconst BostonNewYork6Digit = () => {\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const setHovered = (e: RowHoverEvent | undefined) => {\n    const node = tooltipRef.current;\n    if (node) {\n      if (e && e.datum) {\n        const {datum, mouseCoords} = e;\n        node.innerHTML = getStandardTooltip({\n          title: datum.title,\n          color: rgba(datum.color, 0.3),\n          rows: [\n            ['RCA', scale.invert(datum.value).toFixed(3)],\n          ],\n          boldColumns: [1, 2],\n        });\n        node.style.top = mouseCoords.y + 'px';\n        node.style.left = mouseCoords.x + 'px';\n        node.style.display = 'block';\n      } else {\n        node.style.display = 'none';\n      }\n    }\n  };\n\n  return (\n    <Root>\n      <ComparisonBarChart\n        data={data}\n        formatValue={formatValue}\n        axisLabel={'Specialization'}\n        onRowHover={e => setHovered(e)}\n        numberOfXAxisTicks={numberOfXAxisTicks}\n      />\n      <RapidTooltipRoot ref={tooltipRef} />\n    </Root>\n  )\n}\n\nexport default BostonNewYork6Digit;\n","import React from 'react';\nimport Boston6DigitRCA from './components/Boston6DigitRCA';\nimport {\n  Route,\n  Switch,\n  HashRouter,\n} from 'react-router-dom';\n\nconst App = () => {\n\n  return (\n    <HashRouter>\n      <Switch>\n        <Route component={Boston6DigitRCA} />\n      </Switch>\n    </HashRouter>\n  )\n}\n\nexport default App;\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}